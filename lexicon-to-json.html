<!DOCTYPE html>
<html>
  <head>
    <script src='lexicon-to-json.js'></script>
  </head>

<body>
  <div id='JSONoutput'></div>
  <script>
  window.onload = function () {
    let lexiconURL = "lexicon.xml"; // ?lexicon= overwrites this
    const urlParams = new URLSearchParams(window.location.search);
    lexiconURL = (urlParams.get("lexicon") || lexiconURL);
    
    console.log(lexiconURL);
    
    
    let outputNode = document.getElementById("JSONoutput");
    let output = null;
    
    encodeLexicon(lexiconURL)
      .then((data) => {
        output = JSON.stringify(data);
        })
      .catch ((error) => {
        output = error;
        console.log(error);
        })
      .then (() => {
        outputNode.innerHTML = output;
        });
    };
  </script>
</body>

</html>
